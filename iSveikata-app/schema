SET DB_CLOSE_DELAY 0;          
;              
CREATE USER IF NOT EXISTS SA SALT '0c82cd7d6776b438' HASH 'ef92574650502d9dfda7073387178dc8d9bf95c17c0f3507804895b166fdda30' ADMIN;            
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_DD669A5E_C8CA_48A4_B6DC_9A4F3D45DB06 START WITH 76 BELONGS_TO_TABLE;    
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_221F8567_2128_40BB_B17A_778D80BAA6E7 START WITH 1050 BELONGS_TO_TABLE;  
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_3AF07274_C905_4EB1_B5AE_8939A7513746 START WITH 1124069 BELONGS_TO_TABLE;               
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_25C3BCBA_FC9F_42C7_97F6_45AEC6860C11 START WITH 1145 BELONGS_TO_TABLE;  
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_46FE03FB_F26A_42D3_A8E5_AE2C4D352DB6 START WITH 1587683 BELONGS_TO_TABLE;               
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_37FE1074_4917_466D_A18E_EE09FAB56AB2 START WITH 2705 BELONGS_TO_TABLE;  
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_39BBD49E_311A_4C93_B002_BDDB0A43A032 START WITH 1587676 BELONGS_TO_TABLE;               
CREATE CACHED TABLE PUBLIC.ICD(
    ICD_CODE VARCHAR(7) NOT NULL SELECTIVITY 100,
    TITLE VARCHAR(255) NOT NULL SELECTIVITY 100,
    COUNTER BIGINT SELECTIVITY 15
);        
ALTER TABLE PUBLIC.ICD ADD CONSTRAINT PUBLIC.CONSTRAINT_1 PRIMARY KEY(ICD_CODE);               
-- 2076 +/- SELECT COUNT(*) FROM PUBLIC.ICD;   
CREATE CACHED TABLE PUBLIC.API(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_25C3BCBA_FC9F_42C7_97F6_45AEC6860C11) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_25C3BCBA_FC9F_42C7_97F6_45AEC6860C11 SELECTIVITY 100,
    DESCRIPTION VARCHAR(255) SELECTIVITY 27,
    MEASUREMENTS VARCHAR(255) SELECTIVITY 2,
    TITLE VARCHAR(255) NOT NULL SELECTIVITY 100,
    COUNTER BIGINT SELECTIVITY 1
);               
ALTER TABLE PUBLIC.API ADD CONSTRAINT PUBLIC.CONSTRAINT_F PRIMARY KEY(ID);     
-- 1144 +/- SELECT COUNT(*) FROM PUBLIC.API;   
CREATE CACHED TABLE PUBLIC.MEDICAL_RECORD(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_46FE03FB_F26A_42D3_A8E5_AE2C4D352DB6) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_46FE03FB_F26A_42D3_A8E5_AE2C4D352DB6 SELECTIVITY 100,
    IS_COMPENSABLE BOOLEAN NOT NULL SELECTIVITY 1,
    IS_REPETITIVE BOOLEAN NOT NULL SELECTIVITY 1,
    APPOINTMENT_ID BIGINT SELECTIVITY 100,
    DOCTOR_ID BIGINT SELECTIVITY 57,
    ICD_ICD_CODE VARCHAR(255) SELECTIVITY 79,
    PATIENT_PATIENT_ID BIGINT SELECTIVITY 79
);
ALTER TABLE PUBLIC.MEDICAL_RECORD ADD CONSTRAINT PUBLIC.CONSTRAINT_5 PRIMARY KEY(ID);          
-- 1587618 +/- SELECT COUNT(*) FROM PUBLIC.MEDICAL_RECORD;     
CREATE INDEX PUBLIC.IDX_DOCTORID ON PUBLIC.MEDICAL_RECORD(DOCTOR_ID);          
CREATE INDEX PUBLIC.IDX_PATIENTID ON PUBLIC.MEDICAL_RECORD(PATIENT_PATIENT_ID);
CREATE INDEX PUBLIC.IDX_ICD ON PUBLIC.MEDICAL_RECORD(ICD_ICD_CODE);            
CREATE CACHED TABLE PUBLIC.EMPLOYEE(
    DTYPE VARCHAR(31) NOT NULL SELECTIVITY 25,
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_221F8567_2128_40BB_B17A_778D80BAA6E7) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_221F8567_2128_40BB_B17A_778D80BAA6E7 SELECTIVITY 100,
    FIRST_NAME VARCHAR(255) NOT NULL SELECTIVITY 100,
    IS_ACTIVE BOOLEAN NOT NULL SELECTIVITY 25,
    LAST_NAME VARCHAR(255) NOT NULL SELECTIVITY 100,
    PASSWORD VARCHAR(255) NOT NULL,
    USER_NAME VARCHAR(255) NOT NULL SELECTIVITY 100,
    DRUG_STORE VARCHAR(255) SELECTIVITY 12,
    SPECIALIZATION_ID BIGINT SELECTIVITY 87
);            
ALTER TABLE PUBLIC.EMPLOYEE ADD CONSTRAINT PUBLIC.CONSTRAINT_7 PRIMARY KEY(ID);
-- 1018 +/- SELECT COUNT(*) FROM PUBLIC.EMPLOYEE;              
CREATE CACHED TABLE PUBLIC.PRESCRIPTION(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_3AF07274_C905_4EB1_B5AE_8939A7513746) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_3AF07274_C905_4EB1_B5AE_8939A7513746 SELECTIVITY 100,
    DESCRIPTION VARCHAR(255) SELECTIVITY 9,
    EXPIRATION_DATE DATE SELECTIVITY 4,
    INGREDIENT_AMOUNT BIGINT NOT NULL SELECTIVITY 2,
    PRESCRIPTION_DATE DATE SELECTIVITY 7,
    USE_AMOUNT BIGINT NOT NULL SELECTIVITY 1,
    API_ID BIGINT SELECTIVITY 65,
    DOCTOR_ID BIGINT SELECTIVITY 56,
    PATIENT_PATIENT_ID BIGINT SELECTIVITY 79
);             
ALTER TABLE PUBLIC.PRESCRIPTION ADD CONSTRAINT PUBLIC.CONSTRAINT_A PRIMARY KEY(ID);            
-- 1124003 +/- SELECT COUNT(*) FROM PUBLIC.PRESCRIPTION;       
CREATE INDEX PUBLIC.IDX_API ON PUBLIC.PRESCRIPTION(API_ID);    
CREATE CACHED TABLE PUBLIC.PRESCRIPTION_USAGE(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_37FE1074_4917_466D_A18E_EE09FAB56AB2) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_37FE1074_4917_466D_A18E_EE09FAB56AB2 SELECTIVITY 100,
    USAGE_DATE DATE SELECTIVITY 51,
    DRUGGIST_ID BIGINT SELECTIVITY 1,
    PRESCRIPTION_ID BIGINT SELECTIVITY 99
);        
ALTER TABLE PUBLIC.PRESCRIPTION_USAGE ADD CONSTRAINT PUBLIC.CONSTRAINT_B PRIMARY KEY(ID);      
-- 2704 +/- SELECT COUNT(*) FROM PUBLIC.PRESCRIPTION_USAGE;    
CREATE CACHED TABLE PUBLIC.SPECIALIZATION(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_DD669A5E_C8CA_48A4_B6DC_9A4F3D45DB06) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_DD669A5E_C8CA_48A4_B6DC_9A4F3D45DB06,
    TITLE VARCHAR(255) NOT NULL
);
ALTER TABLE PUBLIC.SPECIALIZATION ADD CONSTRAINT PUBLIC.CONSTRAINT_A6 PRIMARY KEY(ID);         
-- 75 +/- SELECT COUNT(*) FROM PUBLIC.SPECIALIZATION;          
CREATE CACHED TABLE PUBLIC.APPOINTMENT(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_39BBD49E_311A_4C93_B002_BDDB0A43A032) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_39BBD49E_311A_4C93_B002_BDDB0A43A032 SELECTIVITY 100,
    DATE DATE SELECTIVITY 3,
    DESCRIPTION VARCHAR(255) SELECTIVITY 1,
    DURATION BIGINT SELECTIVITY 2
);        
ALTER TABLE PUBLIC.APPOINTMENT ADD CONSTRAINT PUBLIC.CONSTRAINT_2 PRIMARY KEY(ID);             
-- 1587618 +/- SELECT COUNT(*) FROM PUBLIC.APPOINTMENT;        
CREATE CACHED TABLE PUBLIC.PATIENT(
    PATIENT_ID BIGINT NOT NULL SELECTIVITY 100 CHECK ((PATIENT_ID >= 10001010000)
    AND (PATIENT_ID <= 89912319999)),
    BIRTH_DATE DATE SELECTIVITY 90,
    FIRST_NAME VARCHAR(255) NOT NULL SELECTIVITY 66,
    IS_ACTIVE BOOLEAN NOT NULL SELECTIVITY 1,
    LAST_NAME VARCHAR(255) NOT NULL SELECTIVITY 90,
    PASSWORD VARCHAR(255) NOT NULL,
    DOCTOR_ID BIGINT SELECTIVITY 56
);              
ALTER TABLE PUBLIC.PATIENT ADD CONSTRAINT PUBLIC.CONSTRAINT_FB PRIMARY KEY(PATIENT_ID);        
-- 2112495 +/- SELECT COUNT(*) FROM PUBLIC.PATIENT;            
CREATE INDEX PUBLIC.IDX_FIRSTNAME ON PUBLIC.PATIENT(FIRST_NAME);               
CREATE INDEX PUBLIC.IDX_LASTNAME ON PUBLIC.PATIENT(LAST_NAME); 
CREATE INDEX PUBLIC.IDX_FIRST_LASTNAME ON PUBLIC.PATIENT(FIRST_NAME, LAST_NAME);               
ALTER TABLE PUBLIC.SPECIALIZATION ADD CONSTRAINT PUBLIC.UK_P6YT6H5ILS7HC3XN7U34FYXCL UNIQUE(TITLE);            
ALTER TABLE PUBLIC.EMPLOYEE ADD CONSTRAINT PUBLIC.UK_O885FQGB71DMN4HP0P6RS4MS4 UNIQUE(USER_NAME);              
ALTER TABLE PUBLIC.API ADD CONSTRAINT PUBLIC.UK_RPV15XA3WCUA28WN9VE9HJ6EC UNIQUE(TITLE);       
ALTER TABLE PUBLIC.PRESCRIPTION ADD CONSTRAINT PUBLIC.FKA21CHGCCMY2D1W648S045YXO9 FOREIGN KEY(API_ID) REFERENCES PUBLIC.API(ID) NOCHECK;       
ALTER TABLE PUBLIC.MEDICAL_RECORD ADD CONSTRAINT PUBLIC.FKSBVQTUE7A8016VL47FKVPFS5E FOREIGN KEY(ICD_ICD_CODE) REFERENCES PUBLIC.ICD(ICD_CODE) NOCHECK;         
ALTER TABLE PUBLIC.PRESCRIPTION ADD CONSTRAINT PUBLIC.FKBLQCFCSJYC7P5OAEM3B5PPXJW FOREIGN KEY(PATIENT_PATIENT_ID) REFERENCES PUBLIC.PATIENT(PATIENT_ID) NOCHECK;               
ALTER TABLE PUBLIC.EMPLOYEE ADD CONSTRAINT PUBLIC.FKDSW3XNVIPG5X4WYE7CCX2IQIN FOREIGN KEY(SPECIALIZATION_ID) REFERENCES PUBLIC.SPECIALIZATION(ID) NOCHECK;     
ALTER TABLE PUBLIC.MEDICAL_RECORD ADD CONSTRAINT PUBLIC.FK6KK5VIKXYQJ9T39NBSNWAKVIU FOREIGN KEY(APPOINTMENT_ID) REFERENCES PUBLIC.APPOINTMENT(ID) NOCHECK;     
ALTER TABLE PUBLIC.PRESCRIPTION_USAGE ADD CONSTRAINT PUBLIC.FKPMPQW50CSMKSYRRHGBTUM6RDC FOREIGN KEY(DRUGGIST_ID) REFERENCES PUBLIC.EMPLOYEE(ID) NOCHECK;       
ALTER TABLE PUBLIC.PATIENT ADD CONSTRAINT PUBLIC.FKHRPMMC81CJ03MVQKA3W470GR8 FOREIGN KEY(DOCTOR_ID) REFERENCES PUBLIC.EMPLOYEE(ID) NOCHECK;    
ALTER TABLE PUBLIC.MEDICAL_RECORD ADD CONSTRAINT PUBLIC.FK8NCGN4PJMBK97B2XTQX9GJNQO FOREIGN KEY(PATIENT_PATIENT_ID) REFERENCES PUBLIC.PATIENT(PATIENT_ID) NOCHECK;             
ALTER TABLE PUBLIC.MEDICAL_RECORD ADD CONSTRAINT PUBLIC.FKI68GU06F3MFIG0H4LXRYPWRNY FOREIGN KEY(DOCTOR_ID) REFERENCES PUBLIC.EMPLOYEE(ID) NOCHECK;             
ALTER TABLE PUBLIC.PRESCRIPTION_USAGE ADD CONSTRAINT PUBLIC.FK3KUIJRD0EWWRVIN3BI4WR6G5L FOREIGN KEY(PRESCRIPTION_ID) REFERENCES PUBLIC.PRESCRIPTION(ID) NOCHECK;               
ALTER TABLE PUBLIC.PRESCRIPTION ADD CONSTRAINT PUBLIC.FK78HBIQ2B06UT82J5J4RQGD8NX FOREIGN KEY(DOCTOR_ID) REFERENCES PUBLIC.EMPLOYEE(ID) NOCHECK;               
